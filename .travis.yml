language: python
python:
  - "2.7"
  - "3.4"
  - "3.5"
  - "3.6"

cache: pip

addons:
  mariadb: '10.0'

install:
  - pip install -U configparser msgpack-python PyMySQL paramiko
  - pip install -U coveralls coverage

before_script:
  - bash .travis/init_database.sh

script:
  - coverage run ./runtests.py
  - pip install --user .
  - blacknet-master --help
  - blacknet-sensor --help
  - blacknet-updater --help
  - blacknet-scrubber --help

after_script:
  - cat tests/generated/log-maestro.log
  - cat tests/generated/log-honeypot00.log

after_success:
  - coveralls
